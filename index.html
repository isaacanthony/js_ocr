<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>OCR</title>
  <style>
    .container{font-family: arial; width: 500px; margin-top: 100px; padding: 15px;
               margin-left: auto; margin-right: auto; background-color: #dee8f7;
               border-radius: 10px;}
    h1{text-align: center;}
    .upload{margin-bottom: 25px;}
    .thumbnail{max-width: 500px;}
    .progress{height: 25px; width: 100%; margin: 25px 0px; box-sizing: border-box;
              border: 1px solid blue; border-radius: 7px;}
    .progress-bar{height: 100%; width: 0%; background-color: blue;}
  </style>
</head>
<body>
<div class="container">
  <h1>OCR</h1>

  <input class="upload" type="file">
  <img class="thumbnail">

  <div class="progress">
    <div class="progress-bar"></div>
  </div>

  <p class="results"></p>
</div>

<script src='https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.js'></script>
<script>
(function() {
  var $ = function(kls) {
    return document.querySelector(kls);
  }
  var updateProgress = function(p) {
    if (p.status != 'recognizing text') { return; }
    var progress = Math.round(p.progress * 100.0);
    $('.progress-bar').style.width = progress + '%';
  }

  var printResults = function(results) {
    $('.results').innerHTML = results.text;
  };

  var process = function(photo) {
    Tesseract.recognize(photo)
             .progress(function(p) { updateProgress(p); })
             .then(function(results) { printResults(results); });

    $('.thumbnail').src = photo;
  };

  $('.upload').onchange = function(evt) {
    var reader = new FileReader();
    reader.onload = function() { process(reader.result); };
    reader.readAsDataURL(evt.target.files[0]);
  };
})();
</script>
</body>
</html>
