<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>OCR</title>
  <style>
    .container{width: 50rem; font-family: arial;  font-size: 1.2rem; padding: 1rem;
               margin-top: 5rem; margin-left: auto; margin-right: auto;
               background-color: #dee8f7; border-radius: 1rem;}
    h1{text-align: center;}
    .upload{font-size: 1.5rem;}
    .upload{margin-bottom: 1rem;}
    .thumbnail{max-width: 100%;}
    .progress-wrapper{height: 2rem; width: 100%; margin: 1rem 0%; box-sizing: border-box;
                      border: 1px solid blue; border-radius: 0.5rem;}
    .progress{height: 100%; width: 0%; background-color: blue;}
  </style>
</head>
<body>
<div class="container">
  <h1>OCR</h1>

  <input class="upload" type="file">
  <img class="thumbnail">

  <div class="progress-wrapper">
    <div class="progress"></div>
  </div>

  <p class="results"></p>
</div>

<script src='https://cdn.rawgit.com/naptha/tesseract.js/1.0.10/dist/tesseract.js'></script>
<script>
(function() {
  var $ = function(kls) {
    return document.querySelector(kls);
  }
  var updateProgress = function(p) {
    if (p.status != 'recognizing text') { return; }
    var progress = Math.round(p.progress * 100.0);
    $('.progress').style.width = progress + '%';
  }

  var printResults = function(results) {
    $('.results').innerHTML = results.text;
  };

  var process = function(photo) {
    Tesseract.recognize(photo)
             .progress(function(p) { updateProgress(p); })
             .then(function(results) { printResults(results); });

    $('.thumbnail').src = photo;
  };

  $('.upload').onchange = function(evt) {
    var reader = new FileReader();
    reader.onload = function() { process(reader.result); };
    reader.readAsDataURL(evt.target.files[0]);
  };
})();
</script>
</body>
</html>
